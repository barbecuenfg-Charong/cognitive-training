# 项目端口管理器 - 需求文档 (v1.0)

## 一、 项目背景
在本地开发环境中，开发者经常需要同时管理多个 AI 项目（如单词学习系统、股票分析系统等）。每个项目通常包含前端和后端两个服务，占用不同的端口。
目前存在以下痛点：
1.  **启动繁琐**：需要分别打开多个终端窗口，进入不同目录，输入不同的启动命令。
2.  **端口冲突**：如果上一次服务未正确关闭（如直接关闭终端），端口会被残留进程占用，导致下次启动失败。
3.  **管理混乱**：缺乏一个统一的视图来查看当前哪些项目正在运行，哪些端口被占用。
4.  **环境差异**：不同项目依赖不同的 Python 虚拟环境或 Node 版本，手动切换容易出错。

## 二、 项目目标
开发一个轻量级的“项目端口管理器 (Project Port Manager)”，旨在：
1.  **统一入口**：提供一个 Web 界面，一键启动/停止任意已注册项目的全部服务。
2.  **自动清理**：在启动服务前，自动检测并清理目标端口的残留进程。
3.  **状态监控**：实时显示各服务的运行状态（PID、端口占用情况）。
4.  **无缝集成**：支持通过配置文件轻松添加新项目，不侵入项目原有代码。
5.  **稳定运行**：解决 Windows 环境下进程树无法彻底关闭的问题。

## 三、 用户角色
- **开发者 (Developer)**：主要用户，使用该工具来管理日常开发项目的生命周期。

## 四、 功能需求

### 4.1 项目管理
- **R-001 项目注册**：支持通过 API 或配置文件添加新项目（包括项目名称、路径、前后端服务配置）。
- **R-002 项目列表**：在首页展示所有已注册项目的卡片。
- **R-003 一键启动项目**：点击“启动全部”按钮，按序启动该项目下的所有服务（如先启动后端，再启动前端）。
- **R-004 一键停止项目**：点击“停止全部”按钮，终止该项目下的所有相关进程。

### 4.2 服务管理
- **R-005 单服务控制**：支持单独启动或停止某个项目的特定服务（如只重启后端）。
- **R-006 状态显示**：实时显示服务状态：
    - `Running` (绿色)：进程在运行且端口被监听。
    - `Stopped` (灰色)：进程未运行且端口空闲。
    - `Port Conflict` (黄色/红色警告)：进程未由管理器启动，但端口被占用。

### 4.3 进程与端口控制
- **R-007 端口检测**：启动服务前，检查配置的端口是否已被占用。
- **R-008 强制结束 (Kill)**：停止服务时，如果正常终止失败或丢失 PID，应支持通过端口反查 PID 并强制结束进程。
- **R-009 进程树清理**：在 Windows 下，停止服务必须连带关闭其启动的所有子进程（如 `npm run dev` 启动的 `node` 进程）。

### 4.4 系统交互
- **R-010 极简启动**：提供 Windows 批处理/PowerShell 脚本，双击即可启动管理器并自动打开浏览器。
- **R-011 自我清理**：管理器启动时，应确保自身的端口 (5555) 未被占用，如有则自动清理。

## 五、 非功能需求
- **性能**：Web 界面响应时间 < 200ms；进程启动/停止操作响应时间 < 2s。
- **兼容性**：主要支持 Windows 10/11 环境（利用 `taskkill` 等原生命令）。
- **安全性**：仅在 `127.0.0.1` 本地运行，不暴露于公网。
- **易用性**：界面简洁直观，无需复杂配置即可使用。
